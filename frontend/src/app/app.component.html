<div *ngIf="shouldShowSpinner()">
  <mat-progress-spinner
    class="spinner"
    mode="indeterminate"
    diameter="120"
    [color]="colorTheme()"
  >
  </mat-progress-spinner>
</div>
<div class="{{nightModeEnabled() ? 'container containerColorNight':'container containerColor'}}">
  <div class="button_container">
    <button
      *ngIf="openRefImageEnabled()"
      type="button"
      mat-button
      (click)="openReferenceImage()"
      class="{{nightModeEnabled() ? 'activeColorNight button':'activeColor button'}}"
    >
      Open Reference Image
    </button>
    <button
      *ngIf="!openRefImageEnabled()"
      type="button"
      mat-button
      disabled
      class="button_disabled"
    >
      Open Reference Image
    </button>
    <span class="buttonDivider">&nbsp;</span>
    <mat-form-field appearance="fill">
      <select
        matNativeControl
        [disabled]="!refImageSelected || !openRefImageEnabled()"
        [(ngModel)]="selectedProfile"
        name="profile"
        (change)="profileSelectionChanged($event)"
        class="{{
          !refImageSelected || !openRefImageEnabled()
            ? 'dropdown_disabled'
            : nightModeEnabled() ? 'dropdown activeColorNight':'dropdown activeColor'
        }}"
      >
        <option selected="true">Select an Object</option>
        <option *ngFor="let profile of profiles" [value]="profile.value">
          {{ profile.viewValue }}
        </option>
      </select>
    </mat-form-field>

    <span class="dropdown_label zoomLabel">Zoom</span>
    <button
      *ngIf="openRefImageEnabled()"
      type="button"
      mat-button
      (click)="zoomIn()"
      class="{{nightModeEnabled() ? 'buttonZoom activeColorNight' : 'buttonZoom activeColor'}}"
    >
    &nbsp;&nbsp;+&nbsp;&nbsp;
    </button>
    <button
      *ngIf="!openRefImageEnabled()"
      type="button"
      mat-button
      disabled
      class="buttonDisabledZoom"
    >
    &nbsp;&nbsp;+&nbsp;&nbsp;
    </button>

    <button
      *ngIf="openRefImageEnabled()"
      type="button"
      mat-button
      (click)="zoomOut()"
      class="{{nightModeEnabled() ? 'buttonZoom activeColorNight' : 'buttonZoom activeColor'}}"
    >
      &nbsp;&nbsp;-&nbsp;&nbsp;
    </button>
    <button
      *ngIf="!openRefImageEnabled()"
      type="button"
      mat-button
      disabled
      class="buttonDisabledZoom"
    >
    &nbsp;&nbsp;-&nbsp;&nbsp;
    </button>

    <button
      *ngIf="openRefImageEnabled()"
      type="button"
      mat-button
      class="button_about button  {{nightModeEnabled() ? 'activeColorNight':'activeColor'}}"
      (click)="openAbout()"
    >
      About
    </button>
    <button
      *ngIf="!openRefImageEnabled()"
      type="button"
      mat-button
      disabled
      class="button_about button_disabled"
    >
      About
    </button>
  </div>

  <div class="button_container">
    <mat-form-field appearance="fill">
      <mat-label class="dropdown_label rootFolder_label">Root folder</mat-label>
      <input
        matInput
        type="text"
        [disabled]="!refImageSelected || !openRefImageEnabled()"
        [(ngModel)]="rootFolder"
        (click)="selectRootFolder()"
        class="{{
          !refImageSelected || !openRefImageEnabled()
            ? 'dropdown_disabled rootFolder'
            : nightModeEnabled() ? ' activeColorNight dropdown rootFolder':'activeColor dropdown rootFolder'
        }}"
      />
    </mat-form-field>

    <mat-slide-toggle [(ngModel)]="nightMode" [color]="colorTheme()"><span class="sliderLabel">Night mode</span></mat-slide-toggle>

  </div>

  <mat-card class="{{nightModeEnabled() ? 'card cardColorNight': 'card cardColor'}}">
    <mat-card-header>
      <mat-card-title>Sharpen</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <div class="sliderRow">
        <div class="sliderLabel">Radius</div>
        <div class="slider">
          <mat-slider
            [disabled]="!refImageSelected"
            thumbLabel
            step="0.1"
            min="0.5"
            max="4"
            (change)="radiusChanged($event)"
            [(ngModel)]="radius"
            [color]="colorTheme()"
          ></mat-slider>
          <span class="sliderLabel">{{ radius }}</span>
        </div>
      </div>
      <div class="sliderRow">
        <div class="sliderLabel">Amount</div>
        <div class="slider">
          <mat-slider
            [disabled]="!refImageSelected"
            thumbLabel
            step="10"
            min="7000"
            max="9999"
            (change)="amountChanged($event)"
            [(ngModel)]="amount"
            [color]="colorTheme()"
          ></mat-slider>
          <span class="sliderLabel">{{ amount }}</span>
        </div>
      </div>
      <div class="sliderRow">
        <div class="sliderLabel">Iterations</div>
        <div class="slider">
          <mat-slider
            [disabled]="!refImageSelected"
            thumbLabel
            tickInterval="1"
            step="1"
            min="1"
            max="10"
            (change)="iterationsChanged($event)"
            [(ngModel)]="iterations"
            [color]="colorTheme()"
          ></mat-slider>
          <span class="sliderLabel">{{ iterations }}</span>
        </div>
      </div>
      <div class="sliderRow">
        <div class="sliderLabel">Denoise</div>
        <div class="slider">
          <mat-slider
            [disabled]="!refImageSelected"
            thumbLabel
            tickInterval="1000"
            step="100"
            min="0"
            max="10000"
            (change)="denoiseChanged($event)"
            [(ngModel)]="denoise"
            [color]="colorTheme()"
          ></mat-slider>
          <span class="sliderLabel">{{ denoise }}</span>
        </div>
      </div>
    </mat-card-content>
  </mat-card>
  <mat-card class="{{nightModeEnabled() ? 'card cardColorNight': 'card cardColor'}}">
    <mat-card-header>
      <mat-card-title>Light & Color</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <div class="sliderRow">
        <div class="sliderLabel">Gamma</div>
        <div class="slider">
          <mat-slider
            [disabled]="!refImageSelected"
            thumbLabel
            tickInterval="0.01"
            step="0.01"
            min="0.9"
            max="1.1"
            (change)="gammaChanged($event)"
            [(ngModel)]="gamma"
            [color]="colorTheme()"
          ></mat-slider>
          <span class="sliderLabel">{{ gamma }}</span>
        </div>
      </div>
      <div class="sliderRow">
        <div class="sliderLabel">Reduce Red</div>
        <div class="slider">
          <mat-slider
            [disabled]="!refImageSelected"
            thumbLabel
            tickInterval="1"
            step="1"
            min="0"
            max="127"
            (change)="redChanged($event)"
            [(ngModel)]="red"
            [color]="colorTheme()"
          ></mat-slider>
          <span class="sliderLabel">{{ red }}</span>
        </div>
      </div>
      <div class="sliderRow">
        <div class="sliderLabel">Reduce Green</div>
        <div class="slider">
          <mat-slider
            [disabled]="!refImageSelected"
            thumbLabel
            tickInterval="1"
            step="1"
            min="0"
            max="127"
            (change)="greenChanged($event)"
            [(ngModel)]="green"
            [color]="colorTheme()"
          ></mat-slider>
          <span class="sliderLabel">{{ green }}</span>
        </div>
      </div>
      <div class="sliderRow">
        <div class="sliderLabel">Reduce Blue</div>
        <div class="slider">
          <mat-slider
            [disabled]="!refImageSelected"
            thumbLabel
            tickInterval="1"
            step="1"
            min="0"
            max="127"
            (change)="blueChanged($event)"
            [(ngModel)]="blue"
            [color]="colorTheme()"
          ></mat-slider>
          <span class="sliderLabel">{{ blue }}</span>
        </div>
      </div>
    </mat-card-content>
  </mat-card>

  <mat-card class="{{nightModeEnabled() ? 'card cardColorNight': 'card cardColor'}}">
    <mat-card-header>
      <mat-card-title>Worker</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <span class="sliderLabel">{{ workerStatus }}</span>
      <mat-progress-bar
        [color]="colorTheme()"
        [value]="workerProgress"
        mode="determinate"
        [bufferValue]="100"
        >
      </mat-progress-bar>
    </mat-card-content>
  </mat-card>

  <div class="button_container" *ngIf="buttonBarEnabled()">
    <button type="button" mat-button (click)="applyProfile()" class="button {{nightModeEnabled() ? 'activeColorNight':'activeColor'}}">
      Apply Profile
    </button>
    <span class="buttonDivider">&nbsp;</span>
    <button
      type="button"
      mat-button
      (click)="saveReferenceImage()"
      class="button {{nightModeEnabled() ? 'activeColorNight':'activeColor'}}"
    >
      Save Reference Image
    </button>
    <button
      type="button_exit"
      mat-button
      (click)="exit()"
      class="button_exit button {{nightModeEnabled() ? 'activeColorNight':'activeColor'}}"
    >
      Exit
    </button>
  </div>
  <div class="button_container" *ngIf="!buttonBarEnabled()">
    <button type="button" mat-button disabled class="button_disabled">
      Apply Profile
    </button>
    <span class="buttonDivider">&nbsp;</span>
    <button type="button" mat-button disabled class="button_disabled">
      Save Reference Image
    </button>
    <span class="buttonDivider">&nbsp;</span>
    <button
      type="button"
      mat-button
      disabled
      class="button_exit_disabled button_disabled"
    >
      Exit
    </button>
  </div>
</div>
